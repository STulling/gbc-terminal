# TODO

- [x] Implement a basic ROM loader
- [x] Get familiar with the GBC architecture
- [x] Work on basic CPU emulation
- [x] Get basic GUI up and running
- [x] Work on I/O emulation
- [x] Figure out which data to render to GUI
- [x] Debug the bad BG rendering using BGB as a comparison
- [x] Look into bad instruction in CPU test
    - [x] Use BGB to compare the flow
- [x] Look into inconsistent rendering
- [x] Migrate to software rendering
- [ ] ~~Move debugger into CPU~~
    - [ ] ~~Wrap all memory operations to be able to break on reads/writes in debugger~~
    - [ ] Not possible: we would not be able to pass the `Cpu` into the `Debugger`
- [x] Implement timer
- [x] Individual tests that are failing: 1-4, 11
    - [x] Test 1
        - [x] Bad check in add case... see: https://forums.nesdev.com/viewtopic.php?t=15944
    - [x] Test 2
        - [x] Fix: Implement CPU timer
    - [x] Test 3
        - [x] Fix: 16-bit SP/HL imm8 instructions use 8-bit carry and half-carry rules
    - [x] Test 4
        - [x] Fix: faulty half-carry logic for ADC and SBC
    - [x] Test 9
        - [x] Fix 1: Flags not updated for CPL, CCF, and SCF
        - [x] Fix 2: Added the rotate A (non-CB) instruction variants
    - [x] Test 11
        - [x] Fix 1: SWAP (HL) was reading from SP
        - [x] Fix 2: DAA (above)
- [x] Narrow down bug with instr_timing test
    - [x] Break at 0xC352
    - [x] `ret` at 0xC355 is never hit -- somewhere in between, the ROM is reset (?)
    - [x] Fix: turned out that the size for `LdMemCA` was incorrect...
- [x] Get regular OAM DMA working
    - Wiki on how OAM DMA works: https://gbdev.gg8.se/wiki/articles/OAM_DMA_tutorial
- [ ] Get sprite rendering working
    - [ ] Find good test ROM
- [ ] Buffer up serial writes and expose as API on `Gameboy`
    - [ ] This way, we can run tests in-line w/o calling into the CLI
- [ ] Get OAM HDMA working
- [ ] Get MBC3 controller working
- [ ] Implement RTC logic for relevant MBCs
- [ ] Speed change might need to be handled explicitly
- [ ] Look into dot clock pauses: https://gbdev.io/pandocs/#properties-of-stat-modes
- [ ] FPS counter
    - [x] Static linking SDL2 TTF library does not seem to work on Windows
    - [ ] Find an alternative approach
